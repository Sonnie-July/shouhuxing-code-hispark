

/**
 * 
 *      Voltage Min     Voltage Max 
 * user     0.01            0.4 
 * S1       0.4             0.9
 * S2       0.9             1.5 
 * 
 * ADC = Voltage / ( 4 * 1.8 ) * 4096
 * 
 *      Voltage Min     Voltage Max 
 * user     5               228 
 * S1       229             512
 * S2       513             854 
 * 
 * 
 * 
 **/ 

#include "display_board.h"

#define W_CMD 0x00   // 写入指令
#define W_DAT 0x40   // 写入数据

static hi_u8 i, j;                 // 能省下点内存
static hi_u8 oled_buff[8][128];    // 全屏显示内容

static hi_u8 char_fonts[95][16] = {
    {0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00}, /* " ", 0 */
    {0x00,0x00,0x00,0xF8,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x33,0x30,0x00,0x00,0x00}, /* "!", 1 */
    {0x00,0x10,0x0C,0x06,0x10,0x0C,0x06,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00}, /* """, 2 */
    {0x40,0xC0,0x78,0x40,0xC0,0x78,0x40,0x00,0x04,0x3F,0x04,0x04,0x3F,0x04,0x04,0x00}, /* "#", 3 */
    {0x00,0x70,0x88,0xFC,0x08,0x30,0x00,0x00,0x00,0x18,0x20,0xFF,0x21,0x1E,0x00,0x00}, /* "$", 4 */
    {0xF0,0x08,0xF0,0x00,0xE0,0x18,0x00,0x00,0x00,0x21,0x1C,0x03,0x1E,0x21,0x1E,0x00}, /* "%", 5 */
    {0x00,0xF0,0x08,0x88,0x70,0x00,0x00,0x00,0x1E,0x21,0x23,0x24,0x19,0x27,0x21,0x10}, /* "&", 6 */
    {0x10,0x16,0x0E,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00}, /* "'", 7 */
    {0x00,0x00,0x00,0xE0,0x18,0x04,0x02,0x00,0x00,0x00,0x00,0x07,0x18,0x20,0x40,0x00}, /* "(", 8 */
    {0x00,0x02,0x04,0x18,0xE0,0x00,0x00,0x00,0x00,0x40,0x20,0x18,0x07,0x00,0x00,0x00}, /* ")", 9 */
    {0x40,0x40,0x80,0xF0,0x80,0x40,0x40,0x00,0x02,0x02,0x01,0x0F,0x01,0x02,0x02,0x00}, /* "*", 10 */
    {0x00,0x00,0x00,0xF0,0x00,0x00,0x00,0x00,0x01,0x01,0x01,0x1F,0x01,0x01,0x01,0x00}, /* "+", 11 */
    {0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x80,0xB0,0x70,0x00,0x00,0x00,0x00,0x00}, /* ",", 12 */
    {0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x01,0x01,0x01,0x01,0x01,0x01,0x01}, /* "-", 13 */
    {0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x30,0x30,0x00,0x00,0x00,0x00,0x00}, /* ".", 14 */
    {0x00,0x00,0x00,0x00,0x80,0x60,0x18,0x04,0x00,0x60,0x18,0x06,0x01,0x00,0x00,0x00}, /* "/", 15 */
    {0x00,0xE0,0x10,0x08,0x08,0x10,0xE0,0x00,0x00,0x0F,0x10,0x20,0x20,0x10,0x0F,0x00}, /* "0", 16 */
    {0x00,0x10,0x10,0xF8,0x00,0x00,0x00,0x00,0x00,0x20,0x20,0x3F,0x20,0x20,0x00,0x00}, /* "1", 17 */
    {0x00,0x70,0x08,0x08,0x08,0x88,0x70,0x00,0x00,0x30,0x28,0x24,0x22,0x21,0x30,0x00}, /* "2", 18 */
    {0x00,0x30,0x08,0x88,0x88,0x48,0x30,0x00,0x00,0x18,0x20,0x20,0x20,0x11,0x0E,0x00}, /* "3", 19 */
    {0x00,0x00,0xC0,0x20,0x10,0xF8,0x00,0x00,0x00,0x07,0x04,0x24,0x24,0x3F,0x24,0x00}, /* "4", 20 */
    {0x00,0xF8,0x08,0x88,0x88,0x08,0x08,0x00,0x00,0x19,0x21,0x20,0x20,0x11,0x0E,0x00}, /* "5", 21 */
    {0x00,0xE0,0x10,0x88,0x88,0x18,0x00,0x00,0x00,0x0F,0x11,0x20,0x20,0x11,0x0E,0x00}, /* "6", 22 */
    {0x00,0x38,0x08,0x08,0xC8,0x38,0x08,0x00,0x00,0x00,0x00,0x3F,0x00,0x00,0x00,0x00}, /* "7", 23 */
    {0x00,0x70,0x88,0x08,0x08,0x88,0x70,0x00,0x00,0x1C,0x22,0x21,0x21,0x22,0x1C,0x00}, /* "8", 24 */
    {0x00,0xE0,0x10,0x08,0x08,0x10,0xE0,0x00,0x00,0x00,0x31,0x22,0x22,0x11,0x0F,0x00}, /* "9", 25 */
    {0x00,0x00,0x00,0xC0,0xC0,0x00,0x00,0x00,0x00,0x00,0x00,0x30,0x30,0x00,0x00,0x00}, /* ":", 26 */
    {0x00,0x00,0x00,0x80,0x00,0x00,0x00,0x00,0x00,0x00,0x80,0x60,0x00,0x00,0x00,0x00}, /* ";", 27 */
    {0x00,0x00,0x80,0x40,0x20,0x10,0x08,0x00,0x00,0x01,0x02,0x04,0x08,0x10,0x20,0x00}, /* "<", 28 */
    {0x40,0x40,0x40,0x40,0x40,0x40,0x40,0x00,0x04,0x04,0x04,0x04,0x04,0x04,0x04,0x00}, /* "=", 29 */
    {0x00,0x08,0x10,0x20,0x40,0x80,0x00,0x00,0x00,0x20,0x10,0x08,0x04,0x02,0x01,0x00}, /* ">", 30 */
    {0x00,0x70,0x48,0x08,0x08,0x08,0xF0,0x00,0x00,0x00,0x00,0x30,0x36,0x01,0x00,0x00}, /* "?", 31 */
    {0xC0,0x30,0xC8,0x28,0xE8,0x10,0xE0,0x00,0x07,0x18,0x27,0x24,0x23,0x14,0x0B,0x00}, /* "@", 32 */
    {0x00,0x00,0xC0,0x38,0xE0,0x00,0x00,0x00,0x20,0x3C,0x23,0x02,0x02,0x27,0x38,0x20}, /* "A", 33 */
    {0x08,0xF8,0x88,0x88,0x88,0x70,0x00,0x00,0x20,0x3F,0x20,0x20,0x20,0x11,0x0E,0x00}, /* "B", 34 */
    {0xC0,0x30,0x08,0x08,0x08,0x08,0x38,0x00,0x07,0x18,0x20,0x20,0x20,0x10,0x08,0x00}, /* "C", 35 */
    {0x08,0xF8,0x08,0x08,0x08,0x10,0xE0,0x00,0x20,0x3F,0x20,0x20,0x20,0x10,0x0F,0x00}, /* "D", 36 */
    {0x08,0xF8,0x88,0x88,0xE8,0x08,0x10,0x00,0x20,0x3F,0x20,0x20,0x23,0x20,0x18,0x00}, /* "E", 37 */
    {0x08,0xF8,0x88,0x88,0xE8,0x08,0x10,0x00,0x20,0x3F,0x20,0x00,0x03,0x00,0x00,0x00}, /* "F", 38 */
    {0xC0,0x30,0x08,0x08,0x08,0x38,0x00,0x00,0x07,0x18,0x20,0x20,0x22,0x1E,0x02,0x00}, /* "G", 39 */
    {0x08,0xF8,0x08,0x00,0x00,0x08,0xF8,0x08,0x20,0x3F,0x21,0x01,0x01,0x21,0x3F,0x20}, /* "H", 40 */
    {0x00,0x08,0x08,0xF8,0x08,0x08,0x00,0x00,0x00,0x20,0x20,0x3F,0x20,0x20,0x00,0x00}, /* "I", 41 */
    {0x00,0x00,0x08,0x08,0xF8,0x08,0x08,0x00,0xC0,0x80,0x80,0x80,0x7F,0x00,0x00,0x00}, /* "J", 42 */
    {0x08,0xF8,0x88,0xC0,0x28,0x18,0x08,0x00,0x20,0x3F,0x20,0x01,0x26,0x38,0x20,0x00}, /* "K", 43 */
    {0x08,0xF8,0x08,0x00,0x00,0x00,0x00,0x00,0x20,0x3F,0x20,0x20,0x20,0x20,0x30,0x00}, /* "L", 44 */
    {0x08,0xF8,0xF8,0x00,0xF8,0xF8,0x08,0x00,0x20,0x3F,0x00,0x3F,0x00,0x3F,0x20,0x00}, /* "M", 45 */
    {0x08,0xF8,0x30,0xC0,0x00,0x08,0xF8,0x08,0x20,0x3F,0x20,0x00,0x07,0x18,0x3F,0x00}, /* "N", 46 */
    {0xE0,0x10,0x08,0x08,0x08,0x10,0xE0,0x00,0x0F,0x10,0x20,0x20,0x20,0x10,0x0F,0x00}, /* "O", 47 */
    {0x08,0xF8,0x08,0x08,0x08,0x08,0xF0,0x00,0x20,0x3F,0x21,0x01,0x01,0x01,0x00,0x00}, /* "P", 48 */
    {0xE0,0x10,0x08,0x08,0x08,0x10,0xE0,0x00,0x0F,0x18,0x24,0x24,0x38,0x50,0x4F,0x00}, /* "Q", 49 */
    {0x08,0xF8,0x88,0x88,0x88,0x88,0x70,0x00,0x20,0x3F,0x20,0x00,0x03,0x0C,0x30,0x20}, /* "R", 50 */
    {0x00,0x70,0x88,0x08,0x08,0x08,0x38,0x00,0x00,0x38,0x20,0x21,0x21,0x22,0x1C,0x00}, /* "S", 51 */
    {0x18,0x08,0x08,0xF8,0x08,0x08,0x18,0x00,0x00,0x00,0x20,0x3F,0x20,0x00,0x00,0x00}, /* "T", 52 */
    {0x08,0xF8,0x08,0x00,0x00,0x08,0xF8,0x08,0x00,0x1F,0x20,0x20,0x20,0x20,0x1F,0x00}, /* "U", 53 */
    {0x08,0x78,0x88,0x00,0x00,0xC8,0x38,0x08,0x00,0x00,0x07,0x38,0x0E,0x01,0x00,0x00}, /* "V", 54 */
    {0xF8,0x08,0x00,0xF8,0x00,0x08,0xF8,0x00,0x03,0x3C,0x07,0x00,0x07,0x3C,0x03,0x00}, /* "W", 55 */
    {0x08,0x18,0x68,0x80,0x80,0x68,0x18,0x08,0x20,0x30,0x2C,0x03,0x03,0x2C,0x30,0x20}, /* "X", 56 */
    {0x08,0x38,0xC8,0x00,0xC8,0x38,0x08,0x00,0x00,0x00,0x20,0x3F,0x20,0x00,0x00,0x00}, /* "Y", 57 */
    {0x10,0x08,0x08,0x08,0xC8,0x38,0x08,0x00,0x20,0x38,0x26,0x21,0x20,0x20,0x18,0x00}, /* "Z", 58 */
    {0x00,0x00,0x00,0xFE,0x02,0x02,0x02,0x00,0x00,0x00,0x00,0x7F,0x40,0x40,0x40,0x00}, /* "[", 59 */
    {0x00,0x0C,0x30,0xC0,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x01,0x06,0x38,0xC0,0x00}, /* "\", 60 */
    {0x00,0x02,0x02,0x02,0xFE,0x00,0x00,0x00,0x00,0x40,0x40,0x40,0x7F,0x00,0x00,0x00}, /* "]", 61 */
    {0x00,0x00,0x04,0x02,0x02,0x02,0x04,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00}, /* "^", 62 */
    {0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80}, /* "_", 63 */
    {0x00,0x02,0x02,0x04,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00}, /* "`", 64 */
    {0x00,0x00,0x80,0x80,0x80,0x80,0x00,0x00,0x00,0x19,0x24,0x22,0x22,0x22,0x3F,0x20}, /* "a", 65 */
    {0x08,0xF8,0x00,0x80,0x80,0x00,0x00,0x00,0x00,0x3F,0x11,0x20,0x20,0x11,0x0E,0x00}, /* "b", 66 */
    {0x00,0x00,0x00,0x80,0x80,0x80,0x00,0x00,0x00,0x0E,0x11,0x20,0x20,0x20,0x11,0x00}, /* "c", 67 */
    {0x00,0x00,0x00,0x80,0x80,0x88,0xF8,0x00,0x00,0x0E,0x11,0x20,0x20,0x10,0x3F,0x20}, /* "d", 68 */
    {0x00,0x00,0x80,0x80,0x80,0x80,0x00,0x00,0x00,0x1F,0x22,0x22,0x22,0x22,0x13,0x00}, /* "e", 69 */
    {0x00,0x80,0x80,0xF0,0x88,0x88,0x88,0x18,0x00,0x20,0x20,0x3F,0x20,0x20,0x00,0x00}, /* "f", 70 */
    {0x00,0x00,0x80,0x80,0x80,0x80,0x80,0x00,0x00,0x6B,0x94,0x94,0x94,0x93,0x60,0x00}, /* "g", 71 */
    {0x08,0xF8,0x00,0x80,0x80,0x80,0x00,0x00,0x20,0x3F,0x21,0x00,0x00,0x20,0x3F,0x20}, /* "h", 72 */
    {0x00,0x80,0x98,0x98,0x00,0x00,0x00,0x00,0x00,0x20,0x20,0x3F,0x20,0x20,0x00,0x00}, /* "i", 73 */
    {0x00,0x00,0x00,0x80,0x98,0x98,0x00,0x00,0x00,0xC0,0x80,0x80,0x80,0x7F,0x00,0x00}, /* "j", 74 */
    {0x08,0xF8,0x00,0x00,0x80,0x80,0x80,0x00,0x20,0x3F,0x24,0x02,0x2D,0x30,0x20,0x00}, /* "k", 75 */
    {0x00,0x08,0x08,0xF8,0x00,0x00,0x00,0x00,0x00,0x20,0x20,0x3F,0x20,0x20,0x00,0x00}, /* "l", 76 */
    {0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x00,0x20,0x3F,0x20,0x00,0x3F,0x20,0x00,0x3F}, /* "m", 77 */
    {0x80,0x80,0x00,0x80,0x80,0x80,0x00,0x00,0x20,0x3F,0x21,0x00,0x00,0x20,0x3F,0x20}, /* "n", 78 */
    {0x00,0x00,0x80,0x80,0x80,0x80,0x00,0x00,0x00,0x1F,0x20,0x20,0x20,0x20,0x1F,0x00}, /* "o", 79 */
    {0x80,0x80,0x00,0x80,0x80,0x00,0x00,0x00,0x80,0xFF,0xA1,0x20,0x20,0x11,0x0E,0x00}, /* "p", 80 */
    {0x00,0x00,0x00,0x80,0x80,0x80,0x80,0x00,0x00,0x0E,0x11,0x20,0x20,0xA0,0xFF,0x80}, /* "q", 81 */
    {0x80,0x80,0x80,0x00,0x80,0x80,0x80,0x00,0x20,0x20,0x3F,0x21,0x20,0x00,0x01,0x00}, /* "r", 82 */
    {0x00,0x00,0x80,0x80,0x80,0x80,0x80,0x00,0x00,0x33,0x24,0x24,0x24,0x24,0x19,0x00}, /* "s", 83 */
    {0x00,0x80,0x80,0xE0,0x80,0x80,0x00,0x00,0x00,0x00,0x00,0x1F,0x20,0x20,0x00,0x00}, /* "t", 84 */
    {0x80,0x80,0x00,0x00,0x00,0x80,0x80,0x00,0x00,0x1F,0x20,0x20,0x20,0x10,0x3F,0x20}, /* "u", 85 */
    {0x80,0x80,0x80,0x00,0x00,0x80,0x80,0x80,0x00,0x01,0x0E,0x30,0x08,0x06,0x01,0x00}, /* "v", 86 */
    {0x80,0x80,0x00,0x80,0x00,0x80,0x80,0x80,0x0F,0x30,0x0C,0x03,0x0C,0x30,0x0F,0x00}, /* "w", 87 */
    {0x00,0x80,0x80,0x00,0x80,0x80,0x80,0x00,0x00,0x20,0x31,0x2E,0x0E,0x31,0x20,0x00}, /* "x", 88 */
    {0x80,0x80,0x80,0x00,0x00,0x80,0x80,0x80,0x80,0x81,0x8E,0x70,0x18,0x06,0x01,0x00}, /* "y", 89 */
    {0x00,0x80,0x80,0x80,0x80,0x80,0x80,0x00,0x00,0x21,0x30,0x2C,0x22,0x21,0x30,0x00}, /* "z", 90 */
    {0x00,0x00,0x00,0x00,0x80,0x7C,0x02,0x02,0x00,0x00,0x00,0x00,0x00,0x3F,0x40,0x40}, /* "{", 91 */
    {0x00,0x00,0x00,0x00,0xFF,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xFF,0x00,0x00,0x00}, /* "|", 92 */
    {0x00,0x02,0x02,0x7C,0x80,0x00,0x00,0x00,0x00,0x40,0x40,0x3F,0x00,0x00,0x00,0x00}, /* "}", 93 */
    {0x00,0x06,0x01,0x01,0x02,0x02,0x04,0x04,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00}, /* "~", 94 */
};


//  写入 1条 指令
static hi_void Ssd1306_I2c_Write(hi_u8 addr, hi_u8 data)
{
    hi_u8 data_send_buf[] = {addr, data};

    hi_u32 status = 0;  // 状态

    hi_i2c_data ssd1306_i2c_data = {0};

    ssd1306_i2c_data.send_buf = data_send_buf;
    ssd1306_i2c_data.send_len = 2;

    status = hi_i2c_write(HI_I2C_IDX_0, 0x78, &ssd1306_i2c_data);   // 0x78 SSD1306 写地址

    if(status != HI_ERR_SUCCESS)
    {
        printf(" [Ssd1306_I2c_Write] hi_i2c_write = Failed \n");
    }
}

// OLED  初始化
hi_void OLED_Init(hi_void)
{
    // 关闭显示

    Ssd1306_I2c_Write(W_CMD, 0xAE);

    // 设置显示时钟分频比/振荡器频率

    Ssd1306_I2c_Write(W_CMD, 0xD5);
    Ssd1306_I2c_Write(W_CMD, 0x80);

    // 设置复用比

    Ssd1306_I2c_Write(W_CMD, 0xA8);
    Ssd1306_I2c_Write(W_CMD, 0x3F);

    // 设置显示偏移

    Ssd1306_I2c_Write(W_CMD, 0xD3);
    Ssd1306_I2c_Write(W_CMD, 0x00);
    
    // 设置显示起始行

    Ssd1306_I2c_Write(W_CMD, 0x40);

    // 设置段重映射

    Ssd1306_I2c_Write(W_CMD, 0xA1);

    // 设置COM输出扫描方向

    Ssd1306_I2c_Write(W_CMD, 0xC8);

    // 设置COM引脚硬件配置

    Ssd1306_I2c_Write(W_CMD, 0xDA);
    Ssd1306_I2c_Write(W_CMD, 0x12);

    // 设置对比度控制

    Ssd1306_I2c_Write(W_CMD, 0x81);
    Ssd1306_I2c_Write(W_CMD, 0x66);
    
    // 设置预充电时间
    
    Ssd1306_I2c_Write(W_CMD, 0xD9);
    Ssd1306_I2c_Write(W_CMD, 0x22);

    // 设置VCOMH取消选择级别

    Ssd1306_I2c_Write(W_CMD, 0xDB);
    Ssd1306_I2c_Write(W_CMD, 0x30);

    // 打开/关闭整个显示器

    Ssd1306_I2c_Write(W_CMD, 0xA4);

    // 设置正常/反向显示

    Ssd1306_I2c_Write(W_CMD, 0xA6);

    // 设置充电泵

    Ssd1306_I2c_Write(W_CMD, 0x8D);
    Ssd1306_I2c_Write(W_CMD, 0x14);

    // 设置显示方式

    Ssd1306_I2c_Write(W_CMD, 0x20);  // 内存地址
    Ssd1306_I2c_Write(W_CMD, 0x00);  // 水平方向

    // 打开显示

    Ssd1306_I2c_Write(W_CMD, 0xAF);

    // 延迟100ms

    hi_udelay(100000);  //100ms  

    printf("\n display_board [OLED_Init] \n");
}


// OLED 显示信息
hi_void OLED_Show(hi_void)
{
    for(i=0; i<8; i++)
    {
        for(j=0; j<128; j++)
        {
            Ssd1306_I2c_Write(W_DAT, oled_buff[i][j]);
        }
    }

    hi_udelay(100000);  //100ms 刷新过快会出错

    printf("\n display_board [OLED_Show] \n");
}

// OLED 清缓存
hi_void OLED_Clear(hi_void)
{
    for(i=0; i<8; i++)
    {
        for(j=0; j<128; j++)
        {
            oled_buff[i][j] = 0;
        }
    }

    printf("\n display_board [OLED_Clear] \n");
}


// 输入1行字符 必须是英数输入的字符, 否者…… 
// 1个字符 8*16 像素， 全屏 16*4 字符
// x : 0-127 行首距离边框的距离 屏幕一行最多16个字符
// y : 0-7 内存行 1个字符 在内存占2行，屏幕最多4行
// 这样取值 是为了显示居中 比如只有3行 或者行间加行距，但是 容易输入误解 
hi_void OLED_String(hi_u8 x, hi_u8 y, hi_u8 *str)
{
    j = (hi_u8)strlen(str);   // 字符串长度

    for(i=0; i<j; i++)
    {
        hi_u8 l = x + i*8;      // x 行首边距 + i个字符的长度
        hi_u8 c = str[i] - 32;  // 转换成对映字符数组值

        oled_buff[y][l+0] = char_fonts[c][0];
        oled_buff[y][l+1] = char_fonts[c][1];
        oled_buff[y][l+2] = char_fonts[c][2];
        oled_buff[y][l+3] = char_fonts[c][3];
        oled_buff[y][l+4] = char_fonts[c][4];
        oled_buff[y][l+5] = char_fonts[c][5];
        oled_buff[y][l+6] = char_fonts[c][6];
        oled_buff[y][l+7] = char_fonts[c][7];

        // 在内存里 16像素字符 占2行
        oled_buff[y+1][l+0] = char_fonts[c][8];
        oled_buff[y+1][l+1] = char_fonts[c][9];
        oled_buff[y+1][l+2] = char_fonts[c][10];
        oled_buff[y+1][l+3] = char_fonts[c][11];
        oled_buff[y+1][l+4] = char_fonts[c][12];
        oled_buff[y+1][l+5] = char_fonts[c][13];
        oled_buff[y+1][l+6] = char_fonts[c][14];
        oled_buff[y+1][l+7] = char_fonts[c][15];
    }

    printf("\n display_board [OLED_String] \n");
}


/* ---- ---- ---- ---- ---- ---- ---- ---- */

/*
// SWITCH 初始化
hi_void Switch_Adc_Init(hi_void)
{
    hi_u32 state = 0;

    // SWITCH 端口 普通输入输出端口
    state = hi_io_set_func(HI_IO_NAME_GPIO_5, HI_IO_FUNC_GPIO_5_GPIO);

    if(state != HI_ERR_SUCCESS)
    {
        printf(" [Switch_Adc_Init] : hi_io_set_func = FAILURE \n");
    }

    // SWITCH 端口 方向输入
    state = hi_gpio_set_dir(HI_GPIO_IDX_5, HI_GPIO_DIR_IN);

    if(state != HI_ERR_SUCCESS)
    {
        printf(" [Switch_Adc_Init] : hi_gpio_set_dir = FAILURE \n");
    }

    // SWITCH 端口 无拉力
    state = hi_io_set_pull(HI_GPIO_IDX_5, HI_IO_PULL_NONE);

    if(state != HI_ERR_SUCCESS)
    {
        printf(" [Switch_Adc_Init] : hi_io_set_pull = FAILURE \n");
    }

}

*/



/*

static hi_u16 sw_v = 0;   // 端口电压值
static hi_u8 sw_n = 0;   // 建位

// 返回按键值 电压换算的公式 adc = v/4/1.8*4096
hi_u8 Switch_N(hi_void)
{
    sw_v = 0;   // 端口电压值

    hi_adc_read(
        HI_ADC_CHANNEL_2,                   // ADC通道  
        &sw_v,                              // 数据保存地址 
        HI_ADC_EQU_MODEL_8,                 // 8次平均算法模式 
        HI_ADC_CUR_BAIS_DEFAULT,            // 自动识别模式
        20);                                // 从配置采样到启动采样的延时时间计数 一次计数是334ns，其值需在0~0xFF0之间 等一下的时间 长一点让电流稳定 差不多5ms

    sw_n = 0;  // adc = 185x

    if(sw_v > 5 && sw_v < 228)
    {
        sw_n = 3;  // adc = 11x
    }

    if(sw_v > 228 && sw_v < 512)
    {
        sw_n = 1;  // adc = 32x  
    }

    if(sw_v > 512 && sw_v < 854)
    {
        sw_n = 2;  // adc = 55x
    }   

    return sw_n;
}

*/



